<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Health API Documentation - Nekmit</title>
    <link rel="stylesheet" href="/src/style.css" />
  </head>
  <body class="bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
        <div class="flex items-center justify-between">
          <div>
            <h1 class="text-2xl font-bold text-gray-900">Health API</h1>
            <p class="text-sm text-gray-600">Real-time system health monitoring</p>
          </div>
          <a
            href="/"
            class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors"
          >
            ‚Üê Back to Home
          </a>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <!-- Live Status Card -->
      <div class="mb-8">
        <info-card title="Live API Status" subtitle="Real-time health check" theme="success">
          <div id="live-status" class="space-y-4">
            <div class="flex items-center justify-center py-8">
              <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
              <span class="ml-3 text-gray-600">Loading...</span>
            </div>
          </div>
        </info-card>
      </div>

      <!-- API Documentation Grid -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
        <!-- Endpoint Information -->
        <info-card title="Endpoint" subtitle="API endpoint details" theme="primary">
          <div class="space-y-3">
            <div>
              <span class="text-sm font-semibold text-gray-700">URL:</span>
              <code class="block mt-1 px-3 py-2 bg-gray-100 rounded text-sm text-blue-600 font-mono"
                >/api/health</code
              >
            </div>
            <div>
              <span class="text-sm font-semibold text-gray-700">Method:</span>
              <span
                class="inline-block mt-1 px-3 py-1 bg-green-100 text-green-800 rounded text-sm font-semibold"
                >GET</span
              >
            </div>
            <div>
              <span class="text-sm font-semibold text-gray-700">Content-Type:</span>
              <code class="block mt-1 px-3 py-2 bg-gray-100 rounded text-sm font-mono"
                >application/json</code
              >
            </div>
          </div>
        </info-card>

        <!-- Response Parameters -->
        <info-card title="Response Parameters" subtitle="JSON response structure" theme="default">
          <div class="space-y-2 text-sm">
            <div class="flex items-start">
              <code class="font-mono text-blue-600 font-semibold">status</code>
              <span class="ml-2 text-gray-600">- Current health status</span>
            </div>
            <div class="flex items-start">
              <code class="font-mono text-blue-600 font-semibold">timestamp</code>
              <span class="ml-2 text-gray-600">- ISO 8601 timestamp</span>
            </div>
            <div class="flex items-start">
              <code class="font-mono text-blue-600 font-semibold">uptime</code>
              <span class="ml-2 text-gray-600">- Server uptime in seconds</span>
            </div>
            <div class="flex items-start">
              <code class="font-mono text-blue-600 font-semibold">memory</code>
              <span class="ml-2 text-gray-600">- Memory usage (used/total in MB)</span>
            </div>
            <div class="flex items-start">
              <code class="font-mono text-blue-600 font-semibold">environment</code>
              <span class="ml-2 text-gray-600">- Node version, platform, architecture</span>
            </div>
            <div class="flex items-start">
              <code class="font-mono text-blue-600 font-semibold">api</code>
              <span class="ml-2 text-gray-600">- API version and endpoints</span>
            </div>
          </div>
        </info-card>
      </div>

      <!-- Example Response -->
      <div class="mb-8">
        <info-card title="Example Response" subtitle="Sample JSON output" theme="default">
          <pre
            class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm"
          ><code id="example-response">{
  "status": "healthy",
  "timestamp": "2025-10-16T13:00:00.000Z",
  "uptime": 123.45,
  "memory": {
    "used": 45,
    "total": 128,
    "unit": "MB"
  },
  "environment": {
    "nodeVersion": "v20.0.0",
    "platform": "linux",
    "arch": "x64"
  },
  "api": {
    "version": "1.0.0",
    "endpoints": [
      {
        "path": "/api/health",
        "method": "GET",
        "description": "Get system health status"
      }
    ]
  }
}</code></pre>
        </info-card>
      </div>

      <!-- Try It Out -->
      <div class="mb-8">
        <info-card title="Try It Out" subtitle="Test the API directly" theme="primary">
          <div class="space-y-4">
            <button
              id="test-api-btn"
              class="w-full sm:w-auto px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors shadow-md hover:shadow-lg"
            >
              üöÄ Test API Call
            </button>
            <div id="test-result" class="hidden">
              <div class="mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200">
                <div class="flex items-center justify-between mb-2">
                  <span class="text-sm font-semibold text-gray-700">Response:</span>
                  <span
                    id="response-status"
                    class="px-2 py-1 text-xs font-semibold rounded bg-green-100 text-green-800"
                  ></span>
                </div>
                <pre
                  class="bg-white p-3 rounded border border-gray-200 overflow-x-auto text-xs"
                ><code id="test-response-code"></code></pre>
              </div>
            </div>
          </div>
        </info-card>
      </div>

      <!-- Usage Examples -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- JavaScript Example -->
        <info-card title="JavaScript Example" subtitle="Using Fetch API" theme="default">
          <pre
            class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm"
          ><code>fetch('/api/health')
  .then(res => res.json())
  .then(data => {
    console.log('Status:', data.status);
    console.log('Uptime:', data.uptime);
  })
  .catch(err => console.error(err));</code></pre>
        </info-card>

        <!-- cURL Example -->
        <info-card title="cURL Example" subtitle="Command line request" theme="default">
          <pre
            class="bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm"
          ><code>curl -X GET https://nekmit.vercel.app/api/health \
  -H "Accept: application/json"</code></pre>
        </info-card>
      </div>
    </main>

    <!-- Footer Component -->
    <footer-component></footer-component>

    <!-- Scripts -->
    <script type="module">
      import './components/card.js';
      import './components/footer.js';

      // Fetch live API status
      async function fetchLiveStatus() {
        try {
          const response = await fetch('/api/health');
          const data = await response.json();

          const statusHtml = `
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div class="bg-white p-4 rounded-lg border border-gray-200">
                <div class="text-sm text-gray-600 mb-1">Status</div>
                <div class="text-2xl font-bold text-green-600">${data.status}</div>
              </div>
              <div class="bg-white p-4 rounded-lg border border-gray-200">
                <div class="text-sm text-gray-600 mb-1">Uptime</div>
                <div class="text-2xl font-bold text-blue-600">${Math.round(data.uptime)}s</div>
              </div>
              <div class="bg-white p-4 rounded-lg border border-gray-200">
                <div class="text-sm text-gray-600 mb-1">Memory Used</div>
                <div class="text-2xl font-bold text-purple-600">${data.memory.used} MB</div>
              </div>
              <div class="bg-white p-4 rounded-lg border border-gray-200">
                <div class="text-sm text-gray-600 mb-1">Node Version</div>
                <div class="text-2xl font-bold text-gray-700">${data.environment.nodeVersion}</div>
              </div>
            </div>
            <div class="mt-4 text-xs text-gray-500">
              Last updated: ${new Date(data.timestamp).toLocaleString()}
            </div>
          `;

          document.getElementById('live-status').innerHTML = statusHtml;
        } catch (error) {
          document.getElementById('live-status').innerHTML = `
            <div class="text-center py-4">
              <p class="text-red-600 font-semibold">‚ö†Ô∏è Unable to fetch live status</p>
              <p class="text-sm text-gray-600 mt-2">${error.message}</p>
            </div>
          `;
        }
      }

      // Test API button
      document.getElementById('test-api-btn').addEventListener('click', async () => {
        const resultDiv = document.getElementById('test-result');
        const statusSpan = document.getElementById('response-status');
        const codeEl = document.getElementById('test-response-code');

        resultDiv.classList.remove('hidden');
        codeEl.textContent = 'Loading...';

        try {
          const response = await fetch('/api/health');
          const data = await response.json();

          statusSpan.textContent = `${response.status} ${response.statusText}`;
          statusSpan.className = `px-2 py-1 text-xs font-semibold rounded ${
            response.ok ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
          }`;

          codeEl.textContent = JSON.stringify(data, null, 2);
        } catch (error) {
          statusSpan.textContent = 'Error';
          statusSpan.className = 'px-2 py-1 text-xs font-semibold rounded bg-red-100 text-red-800';
          codeEl.textContent = error.message;
        }
      });

      // Load live status on page load
      fetchLiveStatus();

      // Refresh every 10 seconds
      setInterval(fetchLiveStatus, 10000);
    </script>
  </body>
</html>
